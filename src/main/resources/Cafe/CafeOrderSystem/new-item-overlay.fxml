<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.geometry.Insets?>
<?import javafx.scene.control.*?>
<?import javafx.scene.layout.*?>
<?import javafx.scene.text.Font?>

<StackPane xmlns="http://javafx.com/javafx/21"
           xmlns:fx="http://javafx.com/fxml/1"
           fx:controller="Cafe.CafeOrderSystem.UI.NewItemController">
    <!-- Dim background -->
    <Pane style="-fx-background-color: rgba(0,0,0,0.45);" />

    <!-- Card -->
    <BorderPane maxWidth="820" prefWidth="780" maxHeight="640"
                style="-fx-background-color: white; -fx-background-radius: 14; -fx-effect: dropshadow(gaussian, rgba(0,0,0,0.2), 20, 0.2, 0, 6);">
        <padding>
            <Insets top="18" right="18" bottom="18" left="18"/>
        </padding>

        <!-- Header -->
        <top>
            <VBox spacing="6">
                <Label text="Create New Item">
                    <font>
                        <Font name="System Bold" size="20"/>
                    </font>
                </Label>
                <Label text="Use the tabs to switch item type." />
            </VBox>
        </top>

        <!-- Body -->
        <center>
            <TabPane fx:id="typeTabPane" tabClosingPolicy="UNAVAILABLE" prefHeight="520">
                <!-- INGREDIENT TAB (no Unit field) -->
                <Tab fx:id="ingredientTab" text="Ingredient" closable="false">
                    <content>
                        <TabPane fx:id="ingredientInnerTabs" tabClosingPolicy="UNAVAILABLE">
                            <!-- Details -->
                            <Tab fx:id="ingredientDetailsTab" text="Details" closable="false">
                                <content>
                                    <GridPane hgap="14" vgap="12">
                                        <padding><Insets top="14" right="14" bottom="14" left="14"/></padding>
                                        <columnConstraints>
                                            <ColumnConstraints minWidth="160" halignment="RIGHT"/>
                                            <ColumnConstraints hgrow="ALWAYS"/>
                                            <ColumnConstraints minWidth="160" halignment="RIGHT"/>
                                            <ColumnConstraints hgrow="SOMETIMES"/>
                                        </columnConstraints>

                                        <!-- Name -->
                                        <Label text="Name" GridPane.rowIndex="0" GridPane.columnIndex="0"/>
                                        <TextField fx:id="ingredientNameField" promptText="e.g., Espresso Beans"
                                                   GridPane.rowIndex="0" GridPane.columnIndex="1" GridPane.columnSpan="3"/>

                                    </GridPane>
                                </content>
                            </Tab>

                            <!-- Stock / Cost -->
                            <Tab fx:id="ingredientStockTab" text="Stock Cost" closable="false">
                                <content>
                                    <GridPane hgap="14" vgap="12">
                                        <padding><Insets top="14" right="14" bottom="14" left="14"/></padding>
                                        <columnConstraints>
                                            <ColumnConstraints minWidth="160" halignment="RIGHT"/>
                                            <ColumnConstraints hgrow="ALWAYS"/>
                                            <ColumnConstraints minWidth="160" halignment="RIGHT"/>
                                            <ColumnConstraints hgrow="SOMETIMES"/>
                                        </columnConstraints>


                                        <!-- Starting Stock (count) -->
                                        <Label text="Starting Stock" GridPane.rowIndex="0" GridPane.columnIndex="2"/>
                                        <Spinner fx:id="startingStockSpinner" editable="true"
                                                 GridPane.rowIndex="0" GridPane.columnIndex="3"/>

                                        <!-- Preview -->
                                        <Label text="Preview" GridPane.rowIndex="2" GridPane.columnIndex="0"/>
                                        <Label fx:id="ingredientPreviewLabel" text="â€”"
                                               GridPane.rowIndex="2" GridPane.columnIndex="1" GridPane.columnSpan="3"/>
                                    </GridPane>
                                </content>
                            </Tab>
                        </TabPane>
                    </content>
                </Tab>

                <!-- BEVERAGE TAB (stub) -->
                <Tab fx:id="beverageTab" text="Beverage" closable="false" disable="true">
                    <content>
                        <VBox>
                            <Label text="Beverage form goes here (sizes, prices, ingredients per size)." />
                        </VBox>
                    </content>
                </Tab>

                <!-- PASTRY TAB (stub) -->
                <Tab fx:id="pastryTab" text="Pastry" closable="false" disable="true">
                    <content>
                        <VBox>
                            <Label text="Pastry form goes here (flat price, ingredients)." />
                        </VBox>
                    </content>
                </Tab>
            </TabPane>
        </center>

        <!-- Footer -->
        <bottom>
            <HBox alignment="CENTER_RIGHT" spacing="10">
                <Button fx:id="cancelBtn" text="Cancel" onAction="#handleCancel"/>
                <Button fx:id="saveBtn"   text="Save"   onAction="#handleSave" defaultButton="true"/>
            </HBox>
        </bottom>
    </BorderPane>
</StackPane>
